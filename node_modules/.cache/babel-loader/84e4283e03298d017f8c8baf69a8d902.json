{"ast":null,"code":"var _jsxFileName = \"/home/wilson/projetosParticular/yt-react-parallax/src/examples/DemoCanvas.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useRef, useState } from 'react';\nimport imgDoge from '../assets/img-doge.png';\nimport './DemoCanvas.scss'; // original dimensions: 2000x1200\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst IMG_DOGE_WIDTH = 2000;\nconst IMG_DOGE_HEIGHT = IMG_DOGE_WIDTH * 0.6;\nconst WIDTH = 1600;\nconst GUTTER = 120;\nconst vW = 600;\nconst vH = vW * 0.5625;\nconst HEIGHT = vH * 3 + GUTTER * 2;\nconst RANGE_MAX = 75;\nconst SCROLL_MAX = 100;\nconst LINE_WIDTH = 5;\nconst LINE_LABEL_OFFSET = 15;\nconst FONT = '900 24px sans-serif';\nexport const DemoCanvas = () => {\n  _s();\n\n  const [range, setRange] = useState(30);\n  const [scroll, setScroll] = useState(0);\n  const [reversed, setReversed] = useState(false);\n  const [imageLoaded, setImageLoaded] = useState(false);\n  const canvas = useRef(null);\n  const img = useRef(null);\n\n  const initImages = () => {\n    img.current = new Image(); // prettier-ignore\n\n    img.current.addEventListener('load', () => {\n      setImageLoaded(true);\n      drawRef.current();\n    }, false);\n    img.current.src = imgDoge;\n  };\n\n  const draw = () => {\n    if (!canvas.current || !canvas.current.getContext) return;\n    if (!imageLoaded) return;\n    const Δ1 = scroll / SCROLL_MAX;\n    const Δ2 = scroll / SCROLL_MAX;\n    const color = {\n      body: '#ff6e6e',\n      viewport: '#7196ff',\n      imgBox: '#22a782',\n      plxBg: 'darkmagenta'\n    };\n    const rect = {\n      body: {\n        x: GUTTER,\n        y: GUTTER,\n        width: vW,\n        height: HEIGHT - GUTTER * 2\n      },\n      viewport: {\n        x: spread(range, 1),\n        y: GUTTER + (HEIGHT - vH - GUTTER * 2) * Δ1,\n        width: vW,\n        height: vH\n      },\n      imgBox: {\n        x: spread(range, 2),\n        y: GUTTER + vH,\n        width: vW,\n        height: vH\n      },\n      plxBg: {\n        x: spread(range, 3),\n        y: !reversed ? vH + GUTTER * Δ2 : vH + GUTTER - GUTTER * Δ2,\n        width: vW,\n        height: GUTTER + vH\n      }\n    };\n    const imgPos = {\n      x: spread(range, 3),\n      y: Math.max(rect.viewport.y, rect.imgBox.y),\n      width: rect.plxBg.width + GUTTER - spread(range, 2),\n      height: Math.min(rect.viewport.y + rect.viewport.height - rect.imgBox.y, rect.imgBox.y + rect.imgBox.height - rect.viewport.y)\n    };\n    const imgCrop = {\n      x: 0,\n      y: (imgPos.y - rect.plxBg.y) * IMG_DOGE_HEIGHT / rect.plxBg.height,\n      width: imgPos.width * IMG_DOGE_WIDTH / rect.plxBg.width,\n      height: imgPos.height * IMG_DOGE_HEIGHT / rect.plxBg.height\n    };\n    var ctx = canvas.current.getContext('2d');\n    ctx.clearRect(0, 0, WIDTH, HEIGHT);\n    ctx.globalAlpha = 1;\n    Draw.rect(ctx)('body', rect.body, color.body);\n    Draw.rect(ctx)('viewport', rect.viewport, color.viewport);\n    range >= 50 ? Draw.text(ctx)('viewport', rect.viewport, color.viewport) : Draw.lineLabel(ctx)('viewport', rect.viewport, color.viewport);\n    Draw.rect(ctx)('image box', rect.imgBox, color.imgBox);\n    Draw.rect(ctx)('plx background', rect.plxBg, color.plxBg);\n    range >= 50 ? Draw.text(ctx)('plx background', rect.plxBg, color.plxBg) : Draw.lineLabel(ctx)('plx background', rect.plxBg, color.plxBg);\n    Draw.text(ctx)('body', rect.body, color.body);\n    Draw.text(ctx)('imgBox', rect.imgBox, color.imgBox);\n    ctx.font = '20px sans-serif';\n    ctx.fillText('0', GUTTER / 2, GUTTER + 15);\n    ctx.fillText('100', GUTTER / 2 - 20, HEIGHT - GUTTER);\n    ctx.globalAlpha = 0.1;\n    ctx.drawImage(img.current, rect.plxBg.x, rect.plxBg.y, rect.plxBg.width, rect.plxBg.height);\n    ctx.globalAlpha = 0.8;\n    ctx.drawImage(img.current, imgCrop.x, imgCrop.y, imgCrop.width, imgCrop.height, imgPos.x, imgPos.y, imgPos.width, imgPos.height);\n  };\n\n  const drawRef = useRef(draw);\n  drawRef.current = draw;\n  useEffect(() => {\n    drawRef.current();\n    initImages();\n  }, [drawRef, range, scroll, reversed]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row align-items-center justify-content-center m-auto pb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-12 col-xl-1\",\n        style: {\n          backgroundColor: '#111',\n          alignSelf: 'stretch',\n          alignItems: 'center',\n          justifyContent: 'center',\n          display: 'flex'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"rotate-title\",\n          children: \"HOW\\xA0\\xA0IT\\xA0WORKS\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col flex-shrink-1 w-auto position-relative\",\n        style: {\n          backgroundColor: 'black'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n          style: {\n            backgroundColor: 'black'\n          },\n          ref: canvas,\n          width: WIDTH,\n          height: HEIGHT\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex align-items-center justify-content-center\",\n          style: {\n            position: 'absolute',\n            top: 0,\n            right: 0,\n            marginTop: GUTTER,\n            marginRight: GUTTER\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: 'left',\n              minWidth: 225\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: {\n                marginBottom: GUTTER / 2\n              },\n              children: \"CONTROLS\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"sliderScroll\",\n                type: \"range\",\n                min: \"0\",\n                max: \"100\",\n                value: scroll,\n                className: \"slider\",\n                onChange: ev => {\n                  setScroll(Number(ev.target.value));\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Scroll Y: \", scroll]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-shrink-1 flex-grow-0 w-auto\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"sliderRange\",\n                type: \"range\",\n                min: \"0\",\n                max: \"100\",\n                value: range,\n                className: \"slider\",\n                onChange: ev => {\n                  setRange(Number(ev.target.value));\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  whiteSpace: 'nowrap'\n                },\n                children: [\"Horizontal Spread: \", range]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-shrink-1 flex-grow-0 w-auto\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"inputReversed\",\n                type: \"checkbox\",\n                checked: reversed,\n                className: \"chequebox\",\n                onChange: ev => {\n                  setReversed(Boolean(ev.target.checked));\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  whiteSpace: 'nowrap'\n                },\n                children: [\"Reversed: \", String(reversed)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pb-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"constrain mb-3\",\n        children: \"Tip: use the two sliders above for a demonstration of how different elements on the screen move relative to each other with the scrolling parallax effect.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"constrain\",\n        children: [\"The portions of \\xA0\", /*#__PURE__*/_jsxDEV(\"code\", {\n          children: \"plx background\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this), \"\\xA0 outside of the green\\xA0\", /*#__PURE__*/_jsxDEV(\"code\", {\n          children: \"image box\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 71\n        }, this), \" are cropped.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 140,\n    columnNumber: 5\n  }, this);\n};\n\n_s(DemoCanvas, \"yeC2/S1HJoPCXltsx7Spz2q3OPQ=\");\n\n_c = DemoCanvas;\nconst ctxMemo = {\n  current: {}\n};\nconst Draw = {\n  rect: ctx => function () {\n    let label = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'RECT';\n    let rect = arguments.length > 1 ? arguments[1] : undefined;\n    let color = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'red';\n    const {\n      x,\n      y,\n      width,\n      height\n    } = rect;\n    Context.setTemp(ctx);\n    ctx.strokeStyle = color;\n    ctx.lineWidth = LINE_WIDTH;\n    ctx.strokeRect(x, y, width, height);\n    ctx.globalAlpha = 0.05;\n    ctx.fillStyle = color;\n    ctx.fillRect(x, y, width, height);\n    Context.restoreTemp(ctx);\n  },\n  text: ctx => function () {\n    let label = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'RECT';\n    let rect = arguments.length > 1 ? arguments[1] : undefined;\n    let color = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'red';\n    const {\n      x,\n      y\n    } = rect;\n    Context.setTemp(ctx);\n    ctx.font = FONT;\n    ctx.fillStyle = color;\n    ctx.fillText(label, x + 10, y + 25);\n    Context.restoreTemp(ctx);\n  },\n  lineLabel: ctx => function () {\n    let label = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'RECT';\n    let rect = arguments.length > 1 ? arguments[1] : undefined;\n    let color = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'red';\n    const {\n      x,\n      y,\n      width\n    } = rect;\n    const textWidth = ctx.measureText(label).width;\n    Context.setTemp(ctx);\n    ctx.font = FONT;\n    ctx.fillStyle = color;\n    ctx.textAlign = 'right';\n    ctx.fillText(label, x + width + LINE_LABEL_OFFSET + GUTTER / 2 + textWidth, y - 10);\n    ctx.strokeStyle = color;\n    ctx.lineWidth = 1;\n    ctx.beginPath();\n    ctx.moveTo(x + width + LINE_LABEL_OFFSET, y);\n    ctx.lineTo(x + width + LINE_LABEL_OFFSET + GUTTER / 2 + textWidth, y);\n    ctx.stroke();\n    Context.restoreTemp(ctx);\n  }\n};\nconst Context = {\n  setTemp: ctx => {\n    if (!ctxMemo) throw new Error('ctxMemo is nil');\n    if (!ctxMemo.current) throw new Error('ctxMemo.current is nil');\n    ctxMemo.current.strokeStyle = ctx.strokeStyle;\n    ctxMemo.current.fillStyle = ctx.fillStyle;\n    ctxMemo.current.lineWidth = ctx.lineWidth;\n    ctxMemo.current.textAlign = ctx.textAlign;\n  },\n  restoreTemp: ctx => {\n    if (!ctxMemo) throw new Error('ctxMemo is nil');\n    if (!ctxMemo.current) throw new Error('ctxMemo.current is nil');\n    ctx.strokeStyle = ctxMemo.current.strokeStyle;\n    ctx.fillStyle = ctxMemo.current.fillStyle;\n    ctx.lineWidth = ctxMemo.current.lineWidth;\n    ctx.textAlign = ctxMemo.current.textAlign;\n    ctx.globalAlpha = 1;\n  }\n};\n\nconst spread = function (range) {\n  let amount = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  return GUTTER + GUTTER * range / RANGE_MAX * amount;\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"DemoCanvas\");","map":{"version":3,"sources":["/home/wilson/projetosParticular/yt-react-parallax/src/examples/DemoCanvas.jsx"],"names":["useEffect","useRef","useState","imgDoge","IMG_DOGE_WIDTH","IMG_DOGE_HEIGHT","WIDTH","GUTTER","vW","vH","HEIGHT","RANGE_MAX","SCROLL_MAX","LINE_WIDTH","LINE_LABEL_OFFSET","FONT","DemoCanvas","range","setRange","scroll","setScroll","reversed","setReversed","imageLoaded","setImageLoaded","canvas","img","initImages","current","Image","addEventListener","drawRef","src","draw","getContext","Δ1","Δ2","color","body","viewport","imgBox","plxBg","rect","x","y","width","height","spread","imgPos","Math","max","min","imgCrop","ctx","clearRect","globalAlpha","Draw","text","lineLabel","font","fillText","drawImage","backgroundColor","alignSelf","alignItems","justifyContent","display","position","top","right","marginTop","marginRight","textAlign","minWidth","marginBottom","ev","Number","target","value","whiteSpace","Boolean","checked","String","ctxMemo","label","Context","setTemp","strokeStyle","lineWidth","strokeRect","fillStyle","fillRect","restoreTemp","textWidth","measureText","beginPath","moveTo","lineTo","stroke","Error","amount"],"mappings":"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","sourcesContent":["import { useEffect, useRef, useState } from 'react';\n\nimport imgDoge from '../assets/img-doge.png';\n\nimport './DemoCanvas.scss';\n\n// original dimensions: 2000x1200\nconst IMG_DOGE_WIDTH = 2000;\nconst IMG_DOGE_HEIGHT = IMG_DOGE_WIDTH * 0.6;\n\nconst WIDTH = 1600;\nconst GUTTER = 120;\nconst vW = 600;\nconst vH = vW * 0.5625;\nconst HEIGHT = vH * 3 + GUTTER * 2;\nconst RANGE_MAX = 75;\nconst SCROLL_MAX = 100;\nconst LINE_WIDTH = 5;\nconst LINE_LABEL_OFFSET = 15;\nconst FONT = '900 24px sans-serif';\n\nexport const DemoCanvas = () => {\n  const [range, setRange] = useState(30);\n  const [scroll, setScroll] = useState(0);\n  const [reversed, setReversed] = useState(false);\n  const [imageLoaded, setImageLoaded] = useState(false);\n  const canvas = useRef(null);\n  const img = useRef(null);\n\n  const initImages = () => {\n    img.current = new Image();\n    // prettier-ignore\n    img.current.addEventListener('load', () => {\n      setImageLoaded(true);\n      drawRef.current();\n    }, false);\n    img.current.src = imgDoge;\n  };\n\n  const draw = () => {\n    if (!canvas.current || !canvas.current.getContext) return;\n    if (!imageLoaded) return;\n\n    const Δ1 = scroll / SCROLL_MAX;\n    const Δ2 = scroll / SCROLL_MAX;\n\n    const color = {\n      body: '#ff6e6e',\n      viewport: '#7196ff',\n      imgBox: '#22a782',\n      plxBg: 'darkmagenta',\n    };\n\n    const rect = {\n      body: {\n        x: GUTTER,\n        y: GUTTER,\n        width: vW,\n        height: HEIGHT - GUTTER * 2,\n      },\n      viewport: {\n        x: spread(range, 1),\n        y: GUTTER + (HEIGHT - vH - GUTTER * 2) * Δ1,\n        width: vW,\n        height: vH,\n      },\n      imgBox: {\n        x: spread(range, 2),\n        y: GUTTER + vH,\n        width: vW,\n        height: vH,\n      },\n      plxBg: {\n        x: spread(range, 3),\n        y: !reversed ? vH + GUTTER * Δ2 : vH + GUTTER - GUTTER * Δ2,\n        width: vW,\n        height: GUTTER + vH,\n      },\n    };\n    const imgPos = {\n      x: spread(range, 3),\n      y: Math.max(rect.viewport.y, rect.imgBox.y),\n      width: rect.plxBg.width + GUTTER - spread(range, 2),\n      height: Math.min(\n        rect.viewport.y + rect.viewport.height - rect.imgBox.y,\n        rect.imgBox.y + rect.imgBox.height - rect.viewport.y,\n      ),\n    };\n    const imgCrop = {\n      x: 0,\n      y: ((imgPos.y - rect.plxBg.y) * IMG_DOGE_HEIGHT) / rect.plxBg.height,\n      width: (imgPos.width * IMG_DOGE_WIDTH) / rect.plxBg.width,\n      height: (imgPos.height * IMG_DOGE_HEIGHT) / rect.plxBg.height,\n    };\n\n    var ctx = canvas.current.getContext('2d');\n    ctx.clearRect(0, 0, WIDTH, HEIGHT);\n    ctx.globalAlpha = 1;\n    Draw.rect(ctx)('body', rect.body, color.body);\n    Draw.rect(ctx)('viewport', rect.viewport, color.viewport);\n    range >= 50\n      ? Draw.text(ctx)('viewport', rect.viewport, color.viewport)\n      : Draw.lineLabel(ctx)('viewport', rect.viewport, color.viewport);\n    Draw.rect(ctx)('image box', rect.imgBox, color.imgBox);\n    Draw.rect(ctx)('plx background', rect.plxBg, color.plxBg);\n    range >= 50\n      ? Draw.text(ctx)('plx background', rect.plxBg, color.plxBg)\n      : Draw.lineLabel(ctx)('plx background', rect.plxBg, color.plxBg);\n    Draw.text(ctx)('body', rect.body, color.body);\n    Draw.text(ctx)('imgBox', rect.imgBox, color.imgBox);\n\n    ctx.font = '20px sans-serif';\n    ctx.fillText('0', GUTTER / 2, GUTTER + 15);\n    ctx.fillText('100', GUTTER / 2 - 20, HEIGHT - GUTTER);\n\n    ctx.globalAlpha = 0.1;\n    ctx.drawImage(img.current, rect.plxBg.x, rect.plxBg.y, rect.plxBg.width, rect.plxBg.height);\n    ctx.globalAlpha = 0.8;\n    ctx.drawImage(\n      img.current,\n      imgCrop.x,\n      imgCrop.y,\n      imgCrop.width,\n      imgCrop.height,\n      imgPos.x,\n      imgPos.y,\n      imgPos.width,\n      imgPos.height,\n    );\n  };\n  const drawRef = useRef(draw);\n  drawRef.current = draw;\n\n  useEffect(() => {\n    drawRef.current();\n    initImages();\n  }, [drawRef, range, scroll, reversed]);\n\n  return (\n    <div>\n      <div className=\"row align-items-center justify-content-center m-auto pb-4\">\n        <div\n          className=\"col-12 col-xl-1\"\n          style={{\n            backgroundColor: '#111',\n            alignSelf: 'stretch',\n            alignItems: 'center',\n            justifyContent: 'center',\n            display: 'flex',\n          }}\n        >\n          <h4 className=\"rotate-title\">HOW&nbsp;&nbsp;IT&nbsp;WORKS</h4>\n        </div>\n        <div className=\"col flex-shrink-1 w-auto position-relative\" style={{ backgroundColor: 'black' }}>\n          <canvas style={{ backgroundColor: 'black' }} ref={canvas} width={WIDTH} height={HEIGHT} />\n          <div\n            className=\"d-flex align-items-center justify-content-center\"\n            style={{\n              position: 'absolute',\n              top: 0,\n              right: 0,\n              marginTop: GUTTER,\n              marginRight: GUTTER,\n            }}\n          >\n            <div style={{ textAlign: 'left', minWidth: 225 }}>\n              <h3 style={{ marginBottom: GUTTER / 2 }}>CONTROLS</h3>\n              <div>\n                <input\n                  id=\"sliderScroll\"\n                  type=\"range\"\n                  min=\"0\"\n                  max=\"100\"\n                  value={scroll}\n                  className=\"slider\"\n                  onChange={(ev) => {\n                    setScroll(Number(ev.target.value));\n                  }}\n                />\n                <p>Scroll Y: {scroll}</p>\n              </div>\n              <div className=\"flex-shrink-1 flex-grow-0 w-auto\">\n                <input\n                  id=\"sliderRange\"\n                  type=\"range\"\n                  min=\"0\"\n                  max=\"100\"\n                  value={range}\n                  className=\"slider\"\n                  onChange={(ev) => {\n                    setRange(Number(ev.target.value));\n                  }}\n                />\n                <p style={{ whiteSpace: 'nowrap' }}>Horizontal Spread: {range}</p>\n              </div>\n              <div className=\"flex-shrink-1 flex-grow-0 w-auto\">\n                <input\n                  id=\"inputReversed\"\n                  type=\"checkbox\"\n                  checked={reversed}\n                  className=\"chequebox\"\n                  onChange={(ev) => {\n                    setReversed(Boolean(ev.target.checked));\n                  }}\n                />\n                <p style={{ whiteSpace: 'nowrap' }}>Reversed: {String(reversed)}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"pb-5\">\n        <p className=\"constrain mb-3\">\n          Tip: use the two sliders above for a demonstration of how different elements on the screen move relative to\n          each other with the scrolling parallax effect.\n        </p>\n        <p className=\"constrain\">\n          The portions of &nbsp;\n          <code>plx background</code>&nbsp; outside of the green&nbsp;<code>image box</code> are cropped.\n        </p>\n      </div>\n    </div>\n  );\n};\n\nconst ctxMemo = {\n  current: {},\n};\n\nconst Draw = {\n  rect:\n    (ctx) =>\n    (label = 'RECT', rect, color = 'red') => {\n      const { x, y, width, height } = rect;\n      Context.setTemp(ctx);\n      ctx.strokeStyle = color;\n      ctx.lineWidth = LINE_WIDTH;\n      ctx.strokeRect(x, y, width, height);\n      ctx.globalAlpha = 0.05;\n      ctx.fillStyle = color;\n      ctx.fillRect(x, y, width, height);\n      Context.restoreTemp(ctx);\n    },\n  text:\n    (ctx) =>\n    (label = 'RECT', rect, color = 'red') => {\n      const { x, y } = rect;\n      Context.setTemp(ctx);\n      ctx.font = FONT;\n      ctx.fillStyle = color;\n      ctx.fillText(label, x + 10, y + 25);\n      Context.restoreTemp(ctx);\n    },\n  lineLabel:\n    (ctx) =>\n    (label = 'RECT', rect, color = 'red') => {\n      const { x, y, width } = rect;\n      const textWidth = ctx.measureText(label).width;\n      Context.setTemp(ctx);\n      ctx.font = FONT;\n      ctx.fillStyle = color;\n      ctx.textAlign = 'right';\n      ctx.fillText(label, x + width + LINE_LABEL_OFFSET + GUTTER / 2 + textWidth, y - 10);\n      ctx.strokeStyle = color;\n      ctx.lineWidth = 1;\n      ctx.beginPath();\n      ctx.moveTo(x + width + LINE_LABEL_OFFSET, y);\n      ctx.lineTo(x + width + LINE_LABEL_OFFSET + GUTTER / 2 + textWidth, y);\n      ctx.stroke();\n      Context.restoreTemp(ctx);\n    },\n};\n\nconst Context = {\n  setTemp: (ctx) => {\n    if (!ctxMemo) throw new Error('ctxMemo is nil');\n    if (!ctxMemo.current) throw new Error('ctxMemo.current is nil');\n\n    ctxMemo.current.strokeStyle = ctx.strokeStyle;\n    ctxMemo.current.fillStyle = ctx.fillStyle;\n    ctxMemo.current.lineWidth = ctx.lineWidth;\n    ctxMemo.current.textAlign = ctx.textAlign;\n  },\n  restoreTemp: (ctx) => {\n    if (!ctxMemo) throw new Error('ctxMemo is nil');\n    if (!ctxMemo.current) throw new Error('ctxMemo.current is nil');\n\n    ctx.strokeStyle = ctxMemo.current.strokeStyle;\n    ctx.fillStyle = ctxMemo.current.fillStyle;\n    ctx.lineWidth = ctxMemo.current.lineWidth;\n    ctx.textAlign = ctxMemo.current.textAlign;\n    ctx.globalAlpha = 1;\n  },\n};\n\nconst spread = (range, amount = 1) => {\n  return GUTTER + ((GUTTER * range) / RANGE_MAX) * amount;\n};\n"]},"metadata":{},"sourceType":"module"}